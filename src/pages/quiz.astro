---
import Layout from "../layouts/Layout.astro";
import QuizApp from "../components/quiz/QuizApp.astro";

// Fetch all markdown posts to pass into the quiz for recommendations
const allPosts = await Astro.glob("./blog/*.md");

// Sort by date descending
allPosts.sort(
    (a, b) =>
        new Date(b.frontmatter.date).valueOf() -
        new Date(a.frontmatter.date).valueOf(),
);
---

<Layout
    title="Developer Quiz"
    description="Take our quiz to find your next favorite tech article."
>
    <div
        class="container container-sm"
        style="padding-top: 4rem; padding-bottom: 6rem;"
    >
        <header class="section-header text-center" style="margin-bottom: 3rem;">
            <h1 class="h1">
                What kind of <span class="text-gradient">developer</span> are you?
            </h1>
            <p
                style="font-size: 1.2rem; max-width: 600px; margin: 1rem auto; opacity: 0.8;"
            >
                Take our quick 3-question quiz and we'll recommend the perfect
                article from our archives tailored to your interests.
            </p>
        </header>

        <QuizApp posts={allPosts} />
    </div>
</Layout>

<style>
    .text-gradient {
        background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .section-header.text-center {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
    }
</style>
